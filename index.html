<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>The Game - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .game-container {
            width: 100%;
            max-width: 960px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .game-header {
            text-align: center;
        }

        .title {
            font-size: 28px;
            font-weight: 800;
            letter-spacing: 0.5px;
            color: #222;
            margin-bottom: 6px;
        }

        .subtitle {
            font-size: 14px;
            color: #666;
        }

        .game-info {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .info-item {
            background: #f6f7fb;
            border: 1px solid #e7e9f3;
            border-radius: 10px;
            padding: 10px 14px;
            font-weight: 600;
        }

        .piles-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .pile {
            background: #fafbff;
            border: 1px solid #e7e9f3;
            border-radius: 12px;
            padding: 12px;
        }

        .pile-title {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: .08em;
        }

        .pile-card {
            width: 100px;
            height: 140px;
            border-radius: 12px;
            background: #ffffff;
            border: 2px solid #e1e5ee;
            display: grid;
            place-items: center;
            font-size: 26px;
            font-weight: 800;
            margin: 0 auto;
            transition: transform .15s ease;
        }

        .pile-card.new-card {
            animation: pop .25s ease;
        }

        .hand-container {
            background: #fafbff;
            border: 1px solid #e7e9f3;
            border-radius: 12px;
            padding: 12px;
        }

        .hand-label {
            font-size: 13px;
            font-weight: 700;
            color: #555;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: .08em;
            text-align: center;
        }

        .hand-cards {
            display: grid;
            grid-template-columns: repeat(8, minmax(0,1fr));
            gap: 8px;
        }

        .hand-card {
            width: 100%;
            aspect-ratio: 7 / 10;
            background: #fff;
            border: 2px solid #e1e5ee;
            border-radius: 12px;
            display: grid;
            place-items: center;
            font-weight: 800;
            font-size: 20px;
            user-select: none;
            touch-action: manipulation;
            transition: transform .15s ease, box-shadow .15s ease;
        }

        .hand-card:hover {
            transform: translateY(-2px);
        }

        .hand-card.selected {
            outline: 0;
            transform: scale(1.05);
            box-shadow: 0 0 24px rgba(76,175,80,.6);
            z-index: 2;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 12px 14px;
            border: none;
            border-radius: 10px;
            background: #667eea;
            color: #fff;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: transform .1s ease, filter .1s ease, opacity .2s ease;
        }

        button.secondary {
            background: #e9ecff;
            color: #3b49df;
        }

        button:active {
            transform: translateY(1px);
            filter: brightness(.98);
        }

        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        .save-indicator {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 10px 14px;
            border-radius: 999px;
            background: #4CAF50;
            color: #fff;
            font-size: 12px;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(0,0,0,.25);
        }

        .game-over {
            position: fixed;
            inset: 0;
            display: none;
            place-items: center;
            background: rgba(0,0,0,.5);
            z-index: 1000;
        }
        .game-over-content {
            background: #fff;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,.35);
            text-align: center;
            width: min(520px, 92vw);
        }
        .game-over h2 { font-size: 22px; margin-bottom: 10px; }
        .game-over p { color: #666; margin-bottom: 18px; }

        @keyframes pop {
            from { transform: scale(.9); opacity: .8; }
            to   { transform: scale(1); opacity: 1; }
        }

        /* ===== MOBILE: no-scroll, full-viewport layout ===== */
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
          html, body { height: 100%; overflow: hidden; overscroll-behavior: contain; }
          body { padding: 0; margin: 0; background: #667eea; }

          .game-container {
            height: 100svh;            /* fill safe viewport on iOS/Android */
            padding: 8px;
            border-radius: 10px;
            background: white;
            box-shadow: none;
            display: flex;
            flex-direction: column;
            gap: 8px;
          }

          .game-header { flex: 0 0 auto; margin: 0; }
          .game-info {
            display: flex; justify-content: space-around;
            padding: 8px; background: #f0f0f0; border-radius: 5px; font-size: 13px;
          }
          .info-item { font-size: 13px; }
          .controls { display: none; }

          .piles-container {
            flex: 1 1 0;               /* takes all leftover space */
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 8px;
            margin: 0;
            min-height: 0;             /* allow shrink */
          }

          .pile { min-height: 0; padding: 6px; }
          .pile-card {
            width: clamp(40px, 14vw, 64px);
            height: clamp(56px, 20vw, 88px);
            font-size: clamp(16px, 6vw, 24px);
            margin: 0 auto;
          }

          .hand-container { flex: 0 0 auto; padding: 8px; background: #f5f5f5; border-radius: 8px; }
          .hand-label { font-size: 14px; margin-bottom: 8px; text-align: center; font-weight: bold; }

          .hand-cards {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 6px;
            min-height: 0;
          }

          .hand-card {
            width: 100%;
            aspect-ratio: 7 / 10;      /* keeps card proportion */
            height: auto;
            font-size: clamp(14px, 5.2vw, 20px);
            margin: 0;
          }
          .hand-card.selected { transform: scale(1.06); box-shadow: 0 0 20px rgba(76, 175, 80, 0.8); z-index: 10; }

          /* Kill animations on mobile */
          .hand-card.new-card, .pile-card.new-card { animation: none !important; }

          .actions { flex: 0 0 auto; display: flex; gap: 8px; margin-top: 0; }
          button { flex: 1; padding: 12px; font-size: 15px; border-radius: 6px; }

          .game-over {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 85%; padding: 30px 20px; background: white; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); text-align: center; z-index: 1000;
          }

          .save-indicator {
            position: fixed; bottom: 20px; right: 20px;
            font-size: 12px; padding: 8px 16px; background: #4CAF50; color: white; border-radius: 20px;
          }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <div class="title">The Game</div>
            <div class="subtitle">Mobile-first. Zero scroll. Smooth AF.</div>
        </header>

        <section class="game-info">
            <div class="info-item">Moves: <span id="moves">0</span></div>
            <div class="info-item">Cards left: <span id="cardsLeft">98</span></div>
            <div class="info-item">Score: <span id="score">0</span></div>
        </section>

        <section class="piles-container">
            <div class="pile" id="pile1">
                <div class="pile-title">Ascending 1</div>
                <div class="pile-card" id="pile1Card">1</div>
            </div>
            <div class="pile" id="pile2">
                <div class="pile-title">Ascending 2</div>
                <div class="pile-card" id="pile2Card">1</div>
            </div>
            <div class="pile" id="pile3">
                <div class="pile-title">Descending 1</div>
                <div class="pile-card" id="pile3Card">100</div>
            </div>
            <div class="pile" id="pile4">
                <div class="pile-title">Descending 2</div>
                <div class="pile-card" id="pile4Card">100</div>
            </div>
        </section>

        <section class="hand-container">
            <div class="hand-label">Your hand</div>
            <div class="hand-cards" id="hand"></div>
        </section>

        <div class="actions">
            <button id="drawBtn" class="secondary">Draw</button>
            <button id="undoBtn" class="secondary">Undo</button>
            <button id="newGameBtn">New Game</button>
        </div>

        <div class="controls">
            <label><input type="checkbox" id="strictMode"> Strict Mode</label>
            <label><input type="checkbox" id="saveProgress" checked> Auto-Save</label>
        </div>
    </div>

    <div class="save-indicator" id="saveIndicator" style="display:none;">Saved</div>

    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <h2>Game Over</h2>
            <p id="gameOverText">No more valid moves.</p>
            <button id="closeGameOver">Close</button>
        </div>
    </div>

    <script>
        // --- Minimal game logic placeholder (kept from your version) ---
        const handEl = document.getElementById('hand');
        const piles = [
            { id: 'pile1Card', asc: true, value: 1 },
            { id: 'pile2Card', asc: true, value: 1 },
            { id: 'pile3Card', asc: false, value: 100 },
            { id: 'pile4Card', asc: false, value: 100 },
        ];
        const state = {
            deck: Array.from({length: 98}, (_,i)=>i+2), // 2..99
            hand: [],
            moves: 0,
            score: 0
        };

        function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }
        function deal(n=8){ while(state.hand.length<n && state.deck.length){ state.hand.push(state.deck.shift()); } renderHand(); updateInfo(); }
        function updateInfo(){
            document.getElementById('moves').textContent = state.moves;
            document.getElementById('cardsLeft').textContent = state.deck.length;
            document.getElementById('score').textContent = state.score;
        }
        function renderHand(){
            handEl.innerHTML = '';
            state.hand.forEach((v,idx)=>{
                const c = document.createElement('div');
                c.className = 'hand-card';
                c.textContent = v;
                c.onclick = () => selectCard(idx);
                handEl.appendChild(c);
            });
        }
        function selectCard(i){
            document.querySelectorAll('.hand-card').forEach((el,idx)=> el.classList.toggle('selected', idx===i));
            // Here you’d implement dragging/tapping to piles etc.
        }
        function newGame(){
            state.deck = shuffle(Array.from({length: 98}, (_,i)=>i+2));
            state.hand = [];
            state.moves = 0; state.score = 0;
            piles[0].value = piles[1].value = 1;
            piles[2].value = piles[3].value = 100;
            document.getElementById('pile1Card').textContent = '1';
            document.getElementById('pile2Card').textContent = '1';
            document.getElementById('pile3Card').textContent = '100';
            document.getElementById('pile4Card').textContent = '100';
            deal();
        }

        document.getElementById('drawBtn').onclick = ()=> deal();
        document.getElementById('undoBtn').onclick = ()=> {/* your undo logic */};
        document.getElementById('newGameBtn').onclick = ()=> newGame();
        document.getElementById('closeGameOver').onclick = ()=> document.getElementById('gameOver').style.display='none';

        // autosave visual ping
        let saveTimer;
        function pingSave(){
            const el = document.getElementById('saveIndicator');
            el.style.display = 'block';
            clearTimeout(saveTimer);
            saveTimer = setTimeout(()=> el.style.display='none', 900);
        }

        // Kickoff
        newGame();

        // Safety: prevent iOS rubber band inside container (handled by CSS too)
        document.addEventListener('touchmove', (e)=> e.preventDefault(), { passive:false });
    </script>
</body>
</html>
